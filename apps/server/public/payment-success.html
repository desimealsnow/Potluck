<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Returning to App…</title>
    <style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:2rem}.box{max-width:560px;margin:0 auto;padding:24px;border:1px solid #e5e7eb;border-radius:8px}</style>
  </head>
  <body>
    <div class="box">
      <h3>Payment complete</h3>
      <p>Closing this window and returning to the app…</p>
      <p><a id="back" href="/">Click here if it doesn't close</a></p>
    </div>
    <script>
      (function(){
        try {
          var params = new URLSearchParams(location.search);
          var redirect = params.get('redirect') || '/';
          document.getElementById('back').setAttribute('href', redirect);
          try { window.opener && window.opener.postMessage({ type:'payment-complete' }, '*'); } catch(e){}
          try { window.close(); } catch(e){}
          setTimeout(function(){ location.replace(redirect); }, 600);
        } catch(e){}
      })();
    </script>
  </body>
  </html>


